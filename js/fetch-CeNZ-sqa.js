import{d as B,r as p,g as c,z as i,w as s,u,k as h,t as N,A as f,B as q,o,F,h as T,c as _,H as v,N as V,I as j,G as z}from"./vendor-CyYX7On4.js";import{r as d}from"./request-CtLRoyYC.js";const A=l=>d("https://httpbin.org/get",{prefix:"",method:"get",loading:!1,errorTips:!0,...l}),P=l=>d("https://httpbin.org/status/404",{prefix:"",method:"get",loading:!1,errorTips:!0,...l}),R=l=>d("https://httpbin.org/status/500",{prefix:"",method:"get",loading:!0,errorTips:!0,...l}),G={class:"fetch"},I={key:0,class:"w-[90%] m-auto p-4 my-5 bg-[--vt-color-fill-3] rounded-[--vt-border-radius-3] leading-8"},L=h("p",null,"成功请求内容:",-1),E=B({name:"FetchIndex",__name:"fetch",setup(l){const n=p(),y=p([{title:"正常请求",value:"1",type:"primary",loading:!1,controller:null},{title:"失败请求(404)",value:"2",type:"danger",loading:!1,controller:null},{title:"失败请求(500)",value:"3",type:"danger",loading:!1,controller:null}]),m=async e=>{const r=new AbortController;if(e.controller=r,e.value==="1")try{e.loading=!0;const t=await A({signal:r.signal});n.value=t}catch(t){return Promise.reject(t)}finally{e.loading=!1}if(e.value==="2")try{e.loading=!0,await P({signal:r.signal})}catch(t){return Promise.reject(t)}finally{e.loading=!1,n.value=null}if(e.value==="3")try{e.loading=!0,await R({signal:r.signal})}catch(t){return Promise.reject(t)}finally{e.loading=!1,n.value=null}},k=e=>{e.controller&&e.controller.abort(),e.loading=!1,n.value=null};return(e,r)=>{const t=V,g=j,b=z,x=q;return o(),c("div",G,[i(t,{title:"请求事例"}),i(x,null,{default:s(()=>[(o(!0),c(F,null,T(u(y),(a,C)=>(o(),_(b,{key:C,class:"index-cell-item",title:a.title},{value:s(()=>[a.loading?(o(),_(g,{key:0,type:"warning",size:"small",class:"!mr-4",onClick:w=>k(a)},{default:s(()=>[v(" 取消请求 ")]),_:2},1032,["onClick"])):f("",!0),i(g,{type:a.type,size:"small",loading:a.loading,"loading-text":"请求中...",onClick:w=>m(a)},{default:s(()=>[v(" 发起请求 ")]),_:2},1032,["type","loading","onClick"])]),_:2},1032,["title"]))),128))]),_:1}),u(n)?(o(),c("div",I,[L,h("p",null,N(u(n)),1)])):f("",!0)])}}});export{E as default};
